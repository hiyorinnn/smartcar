<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartCar - Return a Car</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="booking.css">
    <style>
        /* Additional styles for the end booking button */
        #end-booking {
            display: none; /* Hidden by default */
            background-color: #4CAF50; /* Green background */
            color: white;
            font-weight: bold;
            padding: 12px 20px;
            margin-top: 10px;
            width: 100%;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-icon">
                <img src="./src/Frame.svg" />
            </div>
            SMARTCAR
        </div>
    </header>

    <div class="booking-container">
        <h1 class="booking-title">Return Your <span>Rented Car</span></h1>

        <div class="booking-sections">
            <!-- Active Bookings Section -->
            <div class="section">
                <h2 class="section-title">Your Active Bookings</h2>
                <div id="active-bookings-container" class="car-list">
                    <!-- Active bookings will be dynamically populated here -->
                    <p>Loading your active bookings...</p>
                </div>
            </div>

            <!-- Return Details Section -->
            <div class="section">
                <h2 class="section-title">Return Details</h2>
                <form id="return-form">
                    <div class="form-group">
                        <label for="selected-booking">Selected Booking</label>
                        <input type="text" id="selected-booking" readonly placeholder="Select a booking to return">
                        <input type="hidden" id="booking-id" name="booking_id">
                    </div>

                    <div class="form-group actual-return-date-group">
                        <label for="actual-return-date">Actual Return Date</label>
                        <input type="datetime-local" id="actual-return-date" required>
                        <button type="button" id="update-timing" class="btn">Update to Current Time</button>
                    </div>                    

                    <div class="form-group">
                        <label for="car-photos">Upload Car Photos</label>
                        <div class="photo-upload-container">
                            <div class="file-upload-area">
                                <input type="file" id="car-photos" name="images" multiple accept="image/*" class="file-input">
                                <label for="car-photos" class="file-upload-label">
                                    <span class="upload-icon">ðŸ“·</span>
                                    <span class="upload-text">Choose Files</span>
                                </label>
                            </div>
                            <div id="photo-preview-container" class="photo-previews"></div>
                            <p class="upload-instruction">Upload multiple photos of the car for condition assessment</p>
                        </div>
                        <button type="button" id="analyze-condition" class="btn">Analyze Car Condition</button>
                        <div id="upload-status" class="upload-status"></div>
                        <div id="defect-count-display" class="defect-count-display"></div>
                    </div>

                    <div class="form-group">
                        <label for="condition">Car Condition</label>
                        <div class="condition-result-container">
                            <input type="text" id="condition" readonly value="Awaiting analysis...">
                            <div id="condition-details" class="condition-details"></div>
                        </div>
                    </div>

                    
                    <!-- New End Booking button for zero defects case -->
                    <button type="button" id="end-booking" class="btn" style="display: none;">End Booking</button>
                    
                    <!-- <button type="button" id="calculate-charges" class="btn" style="margin-bottom: 10px;">Calculate Charges</button>
                    <button type="button" id="confirm-return" class="btn">Confirm Return</button> -->
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="return_car.js"></script>
</body>
</html>
